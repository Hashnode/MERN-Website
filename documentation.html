<!DOCTYPE html>
<!--[if IE 9]><html class="lt-ie10" lang="en" > <![endif]-->
<html class="no-js" lang="en" >
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>MERN â€” Easiest way to build isomorphic JavaScript apps using React and Redux.</title>
		<link href='https://fonts.googleapis.com/css?family=Lato:400,300,100,700,900' rel='stylesheet' type='text/css'/>
		<link rel="stylesheet" href="css/normalize.min.css"/>
		<link rel="stylesheet" href="css/foundation.min.css"/>
		<link rel="stylesheet" href="css/app.css"/>
		<script src="js/modernizr.js"></script>
	</head>
	<body>
		<svg display="none" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
			<defs>
				<symbol id="help" viewBox="0 0 24 24"><title>Help icon</title><path fill="#ffffff" d="M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z" /></symbol>
				<symbol id="chevron-right" viewBox="0 0 24 24"><title>Chevron Right</title><path fill="#ffffff" d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></symbol>
				<symbol id="chevron-left" viewBox="0 0 24 24"><title>Chevron Left</title><path fill="#ffffff" d="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z" /></symbol>
			</defs>
		</svg>
		<div class="navigation-menu">
			<div class="row">
				<div class="small-12 ">
					<nav class="top-bar" data-topbar role="navigation">

					  <ul class="title-area">
					    <li class="name nav-logo"><a href="index.html"><img src="imgs/mern-logo.png" /></a></li>
					    <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
					  </ul>
					  <section class="top-bar-section">
						<ul class="right">
					      <li><a href="#">Support <svg class="icon help"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#help"></use></svg></a></li>
					    </ul>
					    <!-- Left Nav Section -->
					    <ul class="left">
					      <li><a href="index.html#intro">Intro</a></li>
					      <li><a href="index.html#setup">Setup</a></li>
					      <li><a href="index.html#why-mern">Why MERN?</a></li>
					      <li class="active"><a href="documentation.html">Documentation</a></li>
					    </ul>
					  </section>
					</nav>
				</div>
			</div>
		</div>
		<a href="#" class="show-doc-nav">
			<svg class="icon right-chevron"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#chevron-right"></use></svg>
			<svg class="icon left-chevron"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#chevron-left"></use></svg>
		</a>
		<div class="content-section docs-section" id="docs">
			<div class="medium-3 column left-nav">
				<div class="nav-wrap">
					<a href="#quickstart"><h3>Quickstart</h3></a>
					<a href="#file-structure"><h3>File Structure</h3></a>
					<ul>
						<li><a href="#webpack-configs">Webpack Configs</a></li>
						<li><a href="#server">Server</a></li>
						<li><a href="#shared">Shared</a></li>
						<li><a href="#client">Client</a></li>
					</ul>
				</div>
			</div>
			<div class="small-12 medium-9 column content-area">
				<div class="small-10 small-centered columns">
					<h1 class="section-title">MERN Documentation</h1>
					<p>MEARN is a scaffolding tool which makes it easy to build isomorphic apps using solid technologies like <b>Mongo</b>, <b>Express</b>, <b>React</b> and <b>NodeJS</b>. It minimizes the setup time and gets you up to speed using proven technologies.</p>
					<div class="docs">
						<div class="section quickstart" id="quickstart">
							<h2 class="secondary-title">Quickstart</h2>
							<pre>npm install -g mern-cli
mern your_new_app
cd your_new_app
npm install
npm start</pre>
						</div>
						<hr class="divider" />
						<div class="section file-structure" id="file-structure">
							<h2 class="secondary-title">File Structure</h2>
							<div class="sub-section" id="webpack-configs">
								<h3>Webpack Configs</h3>
								<p>MERN uses Webpack for bundling modules. There are two types of webpack configs provided  <span class="highlight">webpack.config.dev.js</span> (for development) and  <span class="highlight">webpack.config.prod.js </span> (for production).</p>
								<p>The webpack configuration is minimal and beginner-friendly. You can customize and add more    features to it for production build.</p>
							</div>
							<div class="sub-section" id="server">
								<h3>Server</h3>
								<p>MERN uses express web framework. Our app sits in server.js where we check for NODE_ENV.</p>
								<p>If NODE_ENV is development we apply webpack middlewares for bundling and Hot Module Replacement.</p>

								<b>Server Side Rendering</b>
								<p>We use react-router's <a href="https://github.com/rackt/react-%09%09%20%20router/blob/latest/docs/API.md#match-routes-location-history-options--cb">match</a> function for handling all page requests so that browser history works.</p>
								<p>All the routes are defined in  <span class="highlight">shared/routes.js</span>. React router renders components according to route requested.
								<pre>// Server Side Rendering based on routes matched by React-router.
app.use((req, res) => {
	match({ routes, location: req.url }, (err, redirectLocation, renderProps) => {
	if (err) {
		return res.status(500).end('Internal server error');
	}

	if (!renderProps) {
		return res.status(404).end('Not found!');
	}

		const initialState = { posts: [], post: {} };

	const store = configureStore(initialState);

	fetchComponentData(store.dispatch, renderProps.components, renderProps.params)
		.then(() => {
	const initialView = renderToString(&lt;Provider store={store}&gt;
		&lt;RouterContext {...renderProps} /&gt;
			&lt;/Provider&gt;
		);
		const finalState = store.getState();
			res.status(200).end(renderFullPage(initialView, finalState));
		})
		.catch(() => {
			res.end(renderFullPage('Error', {}));
		});
	});
});</pre>
								<p><span class="highlight">match</span> takes two parameters, first is an object that contains routes, location and history and second is a callback function which is called when routes have been matched to a location.</p>
								<p>If there's a error in matching we return 500 status code, if no matches are found we return 404 status code. If a match is found then we need to create a new redux store instance.</p>
								<p><b>Note:</b> A new Redux Store is populated afresh on every request.</p>
								<p><b> <span class="highlight">fetchComponentData</span></b> is the key function. It takes three params first is a dispatch function of redux store,  second is an array of components that should be rendered in current route and third is the route params.  <span class="highlight">fetchComponentData</span> collects all the needs (need is an array of actions that are required to be dispatched before rendering the component) of components in the current route. It returns a promise when all the required actions are dispatched. We render the page and send data to client for clinet-side rendering in  <span class="highlight">window.__INITIAL_STATE__</span>.</p>
							</div>
							<div class="sub-section" id="shared">
								<h3 class="secondary-title">Shared</h3>
								<p>Shared directory contains all the components, routes, actions and reducers.</p>
							</div>
							<div class="sub-section" id="client">
								<h3 class="secondary-title">Client</h3>
								<p>Index.js simply does client side rendering using the data provided from <span class="highlight">window.__INITIAL_STATE__</span>.</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="footer">
			<div class="row">
				<div class="small-12 column">
					<a href="#" class="powered-by"><img src="http://res.cloudinary.com/hashnode/image/upload/v1455461442/static_imgs/logos/hashnode-project-grey.png" /></a>
					<p>&copy; 2016 &middot; Hashnode &middot; LinearBytes Inc. </p>
				</div>
			</div>
		</div>

		<script src="js/jquery.js"></script>
		<script src="js/foundation.min.js"></script>
		<script>
			$(document).foundation();
			$(document).ready(function(){
				$(".show-doc-nav").click(function(){
					$(".show-doc-nav").toggleClass("open");
					$("#docs").toggleClass("appear");
				});
				$(".docs-section .left-nav .nav-wrap a").click(function(){
					$("#docs").removeClass("appear");
					$(".show-doc-nav").toggleClass("open");
				});
			});
		</script>
	</body>
</html>